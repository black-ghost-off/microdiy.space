+++
title = 'Дебаг Serial порта(сніфінг)'
date = 2024-07-26T11:03:02+03:00
draft = false
summary = 'Сніфінг/дебаг serial данних в ШИНДУС(може навіть в linux).'
cover = '/images/virtual-serial-port-tools-cases.png'
+++

## Вступ

Треба інколи **дебажити**(**сніфити**) що там якась апка каже серіал порту і проводити реверс інженеринг того всього. Найпростіше що спадає на думку це взяти логічний аналізатор і аналізувати те що бігає по проводках, а краще осцилограф...

Це такий собі варіант коли в нас попросту немає куди під'єднатися, або в девайсі тільки usb і максимально не хочеться паятися, розбирати то, або в нас *RS232 12V* і логічні аналізатори те не андерстуд(згорить нафіг). Тому сьогодні гайд для *Windows *як то аналізувати(у Linux це теж поможе там потрібно юзати socat, або *tty0tty*), не виходячи з-за компа.

## Що нам потрібно?

Потрібно звантажити та встановити Virtual Serial Port Tools
![alt](/images/virtual-serial-port-tools.png)
Так ця апка виглядає в середині і що вона дозволяє робити?
Створювати віртуальні Serial COM порти які з'єднані між собою.

#### Навіщо?

Нижче наведено кейси з якими можна використовувати цю апку.
![alt](/images/virtual-serial-port-tools-cases.png)

Якщо в Linux під python є спеціальна бібліотека **([LINK](https://github.com/ezramorris/PyVirtualSerialPorts))** то в нашому випадку з Windows і python не може так просто взяти і створити віртуальний порт. Тому любимось як можемо.

## Що робити?

![alt](/images/device-manager-COM-ports.png)

1. Качаємо мою апку за **[посиланням](https://github.com/black-ghost-off/serial-port-logger)** яка буде якраз таки логувати все в CSV файл в любому зручному вам форматі(**ASCII, BIN, HEX**), який ви потім якось відкриєте і будете аналізувати.
2. Качаємо *Virtual Serial Port Tools*(гугля допомже).
3. Налаштовуємо bridge як показано в першій картинці. (COM* <-> COM*).
4. Підключаємось апкою одним кінцем до справжнього COM порта(наприклад в мене це COM18), а іншим до одного з віртуальних портів(наприклад до COM10).

```sh
python COMLogger.py --real COM18 --virt COM10 --baud 115200 --mode hex
```

5. Підключаємось додатком який має спілкуватися з вашим девайсом(наприклад Arduino Monitor).
6. Done.
   ![alt](/images/serial-logger-csvexample.png)
   Тепер сидимо і аналізуємо)
